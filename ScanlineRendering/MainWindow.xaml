<Window x:Class="ScanlineRendering.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ScanlineRendering"
        xmlns:wpfTool="clr-namespace:Xceed.Wpf.Toolkit;assembly=Xceed.Wpf.Toolkit"
        xmlns:xceed="http://schemas.xceed.com/wpf/xaml/toolkit"
        mc:Ignorable="d"
        Name="Main"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        Title="Scanline Rendering" Height="750" Width="1300" ResizeMode="NoResize">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        <local:BoolInverterConverter x:Key="BoolInverterConverter" />
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="5*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid HorizontalAlignment="Stretch" Grid.Column="1" Margin="10, 10, 20, 10">
            <Grid.RowDefinitions>
                <RowDefinition Height="0.5*"/>
                <RowDefinition Height="0.5*"/>
                <RowDefinition Height="0.5*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="0.5*"/>
                <RowDefinition Height="0.5*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="0.5*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="0.5*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="0.5*"/>
                <RowDefinition Height="0.5*"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <TextBlock Text="N: " VerticalAlignment="Center"/>
            <TextBox Name="NSize" Grid.Column="1" Grid.ColumnSpan="2" VerticalAlignment="Center">
                <Binding Path="TrianglesInfo.N" ElementName="Main" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged"
                         NotifyOnValidationError="True">
                    <Binding.ValidationRules>
                        <local:TrianglesSizeValidator/>
                    </Binding.ValidationRules>
                </Binding>
            </TextBox>

            <TextBlock Grid.Row="1" Text="M: " VerticalAlignment="Center"/>
            <TextBox Name="MSize" Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="2" VerticalAlignment="Center">
                <Binding Path="TrianglesInfo.M" ElementName="Main" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged"
                         NotifyOnValidationError="True">
                    <Binding.ValidationRules>
                        <local:TrianglesSizeValidator/>
                    </Binding.ValidationRules>
                </Binding>
            </TextBox>

            <TextBlock Grid.Row="2" Text="k, m: " VerticalAlignment="Center"/>
            <RadioButton Grid.Row="2" Grid.Column="1" VerticalAlignment="Center" GroupName="km" IsChecked="True">
                <RadioButton.Content>
                    <TextBlock FontSize="11" Text="random" HorizontalAlignment="Center"/>
                </RadioButton.Content>
            </RadioButton>
            <RadioButton Name="SlidersRadioButton" Grid.Row="2" Grid.Column="2" VerticalAlignment="Center" GroupName="km"
                    IsChecked="{Binding Path=KMMode, ElementName=Main, Converter={StaticResource BoolInverterConverter},
                    UpdateSourceTrigger=PropertyChanged}">
                <RadioButton.Content>
                    <TextBlock FontSize="11" Text="sliders" HorizontalAlignment="Center"/>
                </RadioButton.Content>
            </RadioButton>
            <Grid Grid.Row="3" Grid.ColumnSpan="3" Visibility="{Binding Path=IsChecked, ElementName=SlidersRadioButton,
                Converter={StaticResource BooleanToVisibilityConverter}}">
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Row="0" Grid.Column="0">ks:</TextBlock>
                <Slider Name="SliderKs" Grid.Row="0" Grid.Column="1" Maximum="1" Margin="0, 0, 10, 0" TickFrequency="0.01" IsSnapToTickEnabled="True"/>
                <TextBlock Grid.Row="0" Grid.Column="2" Text="{Binding ElementName=SliderKs, Path=Value, UpdateSourceTrigger=PropertyChanged}"/>
                <TextBlock Grid.Row="1"  Grid.Column="0">kd:</TextBlock>
                <Slider Name="SliderKd" Grid.Row="1" Grid.Column="1" Maximum="1" Margin="0, 0, 10, 0" TickFrequency="0.01" IsSnapToTickEnabled="True"/>
                <TextBlock Grid.Row="1" Grid.Column="2" Text="{Binding ElementName=SliderKd, Path=Value, UpdateSourceTrigger=PropertyChanged}"/>
                <TextBlock Grid.Row="2" Grid.Column="0">m:</TextBlock>
                <Slider Name="SliderM" Grid.Row="2" Grid.Column="1" Maximum="100" Margin="0, 0, 10, 0" TickFrequency="1" IsSnapToTickEnabled="True"/>
                <TextBlock Grid.Row="2" Grid.Column="2" Text="{Binding ElementName=SliderM, Path=Value, UpdateSourceTrigger=PropertyChanged}"/>
            </Grid>

            <TextBlock Grid.Row="4" Text="IL: " VerticalAlignment="Center"/>
            <wpfTool:ColorPicker Grid.Row="4" Name="ILColPicker" Grid.Column="1" Grid.ColumnSpan="2" VerticalAlignment="Center"/>

            <TextBlock Grid.Row="5" Text="Io: " VerticalAlignment="Center"/>
            <RadioButton Name="ConstColRadioButton" Grid.Row="5" Grid.Column="1" VerticalAlignment="Center" GroupName="Io">
                <RadioButton.Content>
                    <TextBlock FontSize="11" Text="const." HorizontalAlignment="Center"/>
                </RadioButton.Content>
            </RadioButton>
            <RadioButton Name="LoadColRadioButton" Grid.Row="5" Grid.Column="2" VerticalAlignment="Center" GroupName="Io"
                    IsChecked="{Binding Path=IoMode, ElementName=Main, Converter={StaticResource BoolInverterConverter},
                    UpdateSourceTrigger=PropertyChanged}">
                <RadioButton.Content>
                    <TextBlock FontSize="11" Text="load" HorizontalAlignment="Center"/>
                </RadioButton.Content>
            </RadioButton>
            <Grid Grid.Row="6" Grid.ColumnSpan="3" Visibility="{Binding ElementName=ConstColRadioButton, Path=IsChecked,
                Converter={StaticResource BooleanToVisibilityConverter}}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <TextBlock FontSize="10" Margin="10, 0, 0, 0" VerticalAlignment="Center">Choose a color:</TextBlock>
                <xceed:ColorPicker Name="ColPicker" Grid.Column="1"></xceed:ColorPicker>
            </Grid>
            <Grid Grid.Row="6" Grid.ColumnSpan="3" Visibility="{Binding ElementName=LoadColRadioButton, Path=IsChecked,
                Converter={StaticResource BooleanToVisibilityConverter}}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <TextBlock FontSize="10" Margin="10, 0, 0, 0" VerticalAlignment="Center">Choose a file:</TextBlock>
                <Button Grid.Column="1" Click="OnLoadColorButtonClick">Load file</Button>
            </Grid>

            <TextBlock Grid.Row="7" Text="N(vector): " VerticalAlignment="Center"/>
            <RadioButton Grid.Row="7" Grid.Column="1" VerticalAlignment="Center" GroupName="N">
                <RadioButton.Content>
                    <TextBlock FontSize="11" Text="const." HorizontalAlignment="Center"/>
                </RadioButton.Content>
            </RadioButton>
            <RadioButton Name="LoadNRadioButton" Grid.Row="7" Grid.Column="2" VerticalAlignment="Center" GroupName="N"
                IsChecked="{Binding Path=NMode, ElementName=Main, Converter={StaticResource BoolInverterConverter},
                UpdateSourceTrigger=PropertyChanged}">
                <RadioButton.Content>
                    <TextBlock FontSize="11" Text="load" HorizontalAlignment="Center"/>
                </RadioButton.Content>
            </RadioButton>
            <Grid Grid.Row="8" Grid.ColumnSpan="3" Visibility="{Binding ElementName=LoadNRadioButton, Path=IsChecked,
                Converter={StaticResource BooleanToVisibilityConverter}}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <TextBlock FontSize="10" Margin="10, 0, 0, 0" VerticalAlignment="Center">Choose a file:</TextBlock>
                <Button Grid.Column="1" Click="OnLoadNButtonClick">Load file</Button>
            </Grid>

            <TextBlock Grid.Row="9" Text="Fill color: " VerticalAlignment="Center"/>
            <RadioButton Grid.Row="9" Grid.Column="1" VerticalAlignment="Center" GroupName="Color" IsChecked="True">
                <RadioButton.Content>
                    <TextBlock FontSize="11" Text="accurate" HorizontalAlignment="Center"/>
                </RadioButton.Content>
            </RadioButton>
            <RadioButton Grid.Row="9" Grid.Column="2" VerticalAlignment="Center" GroupName="Color" IsChecked="{Binding Path=HybridMode,
                ElementName=Main, Converter={StaticResource BoolInverterConverter}, UpdateSourceTrigger=PropertyChanged}">
                <RadioButton.Content>
                    <TextBlock FontSize="11" Text="hybrid" HorizontalAlignment="Center"/>
                </RadioButton.Content>
            </RadioButton>
            <RadioButton Grid.Row="10" Grid.Column="1" Grid.ColumnSpan="2" VerticalAlignment="Center" GroupName="Color" IsChecked="{Binding Path=InterpolMode,
                ElementName=Main, Converter={StaticResource BoolInverterConverter}, UpdateSourceTrigger=PropertyChanged}">
                <RadioButton.Content>
                    <TextBlock FontSize="11" Text="interpolation" HorizontalAlignment="Center"/>
                </RadioButton.Content>
            </RadioButton>

            <TextBlock Grid.Row="11" Text="L: " VerticalAlignment="Center"/>
            <RadioButton Grid.Row="11" Grid.Column="1" VerticalAlignment="Center" GroupName="L" IsChecked="True" Click="OnNoLModeClick">
                <RadioButton.Content>
                    <TextBlock FontSize="11" Text="const." HorizontalAlignment="Center"/>
                </RadioButton.Content>
            </RadioButton>
            <RadioButton Grid.Row="11" Grid.Column="2" VerticalAlignment="Center" GroupName="L" Click="OnLModeClick"
                IsChecked="{Binding Path=LMode, ElementName=Main, Converter={StaticResource BoolInverterConverter},
                UpdateSourceTrigger=PropertyChanged}">
                <RadioButton.Content>
                    <TextBlock FontSize="11" Text="moving" HorizontalAlignment="Center"/>
                </RadioButton.Content>
            </RadioButton>

            <Button Grid.Row="12" Grid.ColumnSpan="3" Click="OnApplyChangesClick">Apply changes</Button>
        </Grid>
        <Canvas Name="Board" MouseLeftButtonDown="OnCanvasMouseDown"
                Loaded="OnCanvasLoaded" MouseMove="OnCanvasMouseMove"
                MouseLeftButtonUp="OnCanvasMouseUp" Margin ="10, 10, 10, 10" Background="Transparent" MouseLeave="OnCanvasMouseLeave">
        </Canvas>
    </Grid>
</Window>
